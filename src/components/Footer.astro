---
import { Phone, Mail, MapPin } from "lucide-react";
import Form from "./Form.astro";
---

<footer
    id="contacto"
    class="relative bg-gray-900 text-white pt-20 pb-10 overflow-hidden"
>
    <!-- Video Background -->
    <div class="absolute inset-0 z-0">
        <video
            muted
            playsinline
            preload="none"
            class="w-full h-full object-cover opacity-30 lazy-video"
            poster="/imagenes/terraza.png"
        >
            <source data-src="/footer.mp4" type="video/mp4" />
        </video>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const lazyVideos = [].slice.call(
                    document.querySelectorAll("video.lazy-video"),
                );
                if ("IntersectionObserver" in window) {
                    const lazyVideoObserver = new IntersectionObserver(
                        (entries, observer) => {
                            entries.forEach((video) => {
                                if (video.isIntersecting) {
                                    const videoElement =
                                        video.target as HTMLVideoElement;
                                    const sources =
                                        videoElement.querySelectorAll("source");
                                    sources.forEach((source) => {
                                        source.src = source.dataset.src || "";
                                    });
                                    videoElement.load();
                                    videoElement.play();
                                    videoElement.loop = true; // Set loop after loading
                                    lazyVideoObserver.unobserve(videoElement);
                                }
                            });
                        },
                    );
                    lazyVideos.forEach((lazyVideo) => {
                        lazyVideoObserver.observe(lazyVideo as Element);
                    });
                }
            });
        </script>
        <div class="absolute inset-0 bg-gray-900/90 z-10"></div>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-20">
        <div
            class="grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-20 mb-20 items-center"
        >
            <!-- Información de Contacto -->
            <div class="lg:col-span-5">
                <div
                    class="inline-block px-4 py-1.5 bg-[#d97706]/20 border border-[#d97706]/30 rounded-full mb-6 backdrop-blur-sm reveal"
                >
                    <span
                        class="text-[#fb923c] font-medium tracking-wide text-sm uppercase"
                        >Estamos Esperándote</span
                    >
                </div>

                <h2
                    class="text-4xl md:text-5xl font-bold mb-8 reveal text-white leading-tight"
                >
                    Hablemos de tu <br />
                    <span
                        class="text-transparent bg-clip-text bg-gradient-to-r from-[#fb923c] to-[#fcd34d]"
                        >Próxima Estadía</span
                    >
                </h2>

                <p
                    class="text-gray-300 mb-12 text-lg reveal reveal-delay-200 leading-relaxed font-light"
                >
                    Ya sea una escapada de fin de semana o unas vacaciones
                    largas, estamos aquí para asegurar que tu experiencia en
                    Valparaíso sea inolvidable.
                </p>

                <div class="space-y-8 reveal reveal-delay-300">
                    <a
                        href="https://wa.me/56998518939"
                        target="_blank"
                        onclick="return gtag_report_conversion(this.href, 'AW-17835958873/fB4gCK_PmtgbENnE7LhC');"
                        class="flex items-center group p-4 rounded-xl hover:bg-white/5 transition-all duration-300 border border-transparent hover:border-white/10"
                    >
                        <div
                            class="w-14 h-14 bg-gradient-to-br from-[#1e3a8a] to-[#0f172a] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg border border-white/10"
                        >
                            <Phone className="w-6 h-6 text-[#fb923c]" />
                        </div>
                        <div class="ml-6">
                            <p
                                class="text-xs text-gray-400 uppercase tracking-wider font-medium mb-1"
                            >
                                WhatsApp & Teléfono
                            </p>
                            <p
                                class="text-xl font-medium text-white group-hover:text-[#fb923c] transition-colors"
                            >
                                +56 9 98518939
                            </p>
                        </div>
                    </a>

                    <div
                        class="flex items-start group p-4 rounded-xl hover:bg-white/5 transition-all duration-300 border border-transparent hover:border-white/10"
                    >
                        <div
                            class="w-14 h-14 bg-gradient-to-br from-[#1e3a8a] to-[#0f172a] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg border border-white/10 flex-shrink-0"
                        >
                            <Mail className="w-6 h-6 text-[#fb923c]" />
                        </div>
                        <div class="ml-6">
                            <p
                                class="text-xs text-gray-400 uppercase tracking-wider font-medium mb-1"
                            >
                                Correo Electrónico
                            </p>
                            <a
                                href="mailto:contacto@casahospedaje.cl"
                                class="text-lg md:text-xl font-medium text-white group-hover:text-[#fb923c] transition-colors block break-all"
                                >contacto@casahospedaje.cl</a
                            >
                            <a
                                href="mailto:gonzalez.sergomar@gmail.com"
                                class="text-sm text-gray-400 hover:text-[#fb923c] transition-colors block mt-1 break-all"
                                >gonzalez.sergomar@gmail.com</a
                            >
                        </div>
                    </div>

                    <div
                        class="flex items-center group p-4 rounded-xl hover:bg-white/5 transition-all duration-300 border border-transparent hover:border-white/10"
                    >
                        <div
                            class="w-14 h-14 bg-gradient-to-br from-[#1e3a8a] to-[#0f172a] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg border border-white/10"
                        >
                            <MapPin className="w-6 h-6 text-[#fb923c]" />
                        </div>
                        <div class="ml-6 flex-1">
                            <p
                                class="text-xs text-gray-400 uppercase tracking-wider font-medium mb-1"
                            >
                                Ubicación
                            </p>
                            <p class="text-lg text-white leading-snug">
                                San Luis #465, Cerro Los Placeres,<br /> Valparaíso,
                                Chile.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Formulario -->
            <div class="lg:col-span-1"></div>
            <!-- Spacer if needed, or adjust col-spans -->

            <div
                class="lg:col-span-6 bg-white/95 backdrop-blur-md rounded-3xl p-4 md:p-12 text-gray-900 shadow-2xl reveal reveal-delay-200 border border-white/20 relative overflow-hidden"
            >
                <div
                    class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-[#d97706]/10 to-transparent rounded-bl-full pointer-events-none"
                >
                </div>

                <h3 class="text-3xl font-bold mb-2 text-[#1e3a8a]">
                    Envíanos un mensaje
                </h3>
                <p class="text-gray-500 mb-8">
                    Completa el formulario y te responderemos a la brevedad.
                </p>
                <Form />
            </div>
        </div>

        <div
            class="border-t border-gray-800 pt-8 text-center text-gray-500 text-sm reveal"
        >
            <p>
                &copy; {new Date().getFullYear()} Casa Hospedaje Cerro Los Placeres.
                Todos los derechos reservados.
            </p>
        </div>
    </div>
</footer>
