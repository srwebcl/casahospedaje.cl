---

---

<form class="space-y-6" id="contact-form">
    <div>
        <label for="name" class="block text-sm font-medium text-gray-700"
            >Nombre</label
        >
        <input
            type="text"
            name="name"
            id="name"
            required
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[#1e3a8a] focus:ring-[#1e3a8a] py-3 px-4 bg-gray-50"
            placeholder="Tu nombre completo"
        />
    </div>

    <div>
        <label for="email" class="block text-sm font-medium text-gray-700"
            >Correo Electrónico</label
        >
        <input
            type="email"
            name="email"
            id="email"
            required
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[#1e3a8a] focus:ring-[#1e3a8a] py-3 px-4 bg-gray-50"
            placeholder="tu@correo.com"
        />
    </div>

    <div>
        <label for="subject" class="block text-sm font-medium text-gray-700"
            >Asunto</label
        >
        <input
            type="text"
            name="subject"
            id="subject"
            required
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[#1e3a8a] focus:ring-[#1e3a8a] py-3 px-4 bg-gray-50"
            placeholder="Consulta por habitación..."
        />
    </div>

    <div>
        <label for="message" class="block text-sm font-medium text-gray-700"
            >Mensaje</label
        >
        <textarea
            name="message"
            id="message"
            rows="4"
            required
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[#1e3a8a] focus:ring-[#1e3a8a] py-3 px-4 bg-gray-50"
            placeholder="Escribe tu mensaje aquí..."></textarea>
    </div>

    <div>
        <button
            type="submit"
            class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#1e3a8a] hover:bg-[#1e3a8a]/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#1e3a8a] transition-colors duration-300"
        >
            Enviar Mensaje
        </button>
    </div>

    <div id="form-status" class="hidden text-sm font-medium text-center"></div>
</form>

<script>
    const form = document.getElementById("contact-form") as HTMLFormElement;
    const statusDiv = document.getElementById("form-status") as HTMLDivElement;

    form?.addEventListener("submit", async (e) => {
        e.preventDefault();
        const formData = new FormData(form);

        // Disable button
        const submitBtn = form.querySelector(
            'button[type="submit"]',
        ) as HTMLButtonElement;
        const originalText = submitBtn.innerText;
        submitBtn.disabled = true;
        submitBtn.innerText = "Enviando...";
        statusDiv.classList.add("hidden");

        try {
            const response = await fetch("/api/send-email", {
                method: "POST",
                body: formData,
            });

            const data = await response.json();

            if (response.ok) {
                // Redirect to thank you page
                window.location.href = "/gracias";
            } else {
                throw new Error(data.message || "Error al enviar el mensaje");
            }
        } catch (error: any) {
            console.error(error);
            statusDiv.innerText =
                "Hubo un error al enviar el mensaje. " +
                (error.message || "Por favor intenta nuevamente.");
            statusDiv.classList.remove("text-green-600", "hidden");
            statusDiv.classList.add("text-red-600");

            submitBtn.disabled = false;
            submitBtn.innerText = originalText;
            statusDiv.classList.remove("hidden");
        }
    });
</script>
